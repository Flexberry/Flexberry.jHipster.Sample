# Система логирования

При генерации проекта нельзя выбрать систему логирования, она настроится автоматически.

В сгенерированном примере используется стандартная для **Spring Boot** система логирования **slf4j** с настройками **logback**.

## Инициализация

Инициализация происходит в файле: 

src/main/java/(...имя пакета...)/config/**LoggingConfiguration.java**

Для логирования используются пакеты **ch.qos.logback** и **org.slf4j**

```java
import ch.qos.logback.classic.LoggerContext;
import org.slf4j.LoggerFactory;

...

LoggerContext context = (LoggerContext) LoggerFactory.getILoggerFactory();

Map<String, String> map = new HashMap<>();
map.put("app_name", appName);
map.put("app_port", serverPort);
String customFields = mapper.writeValueAsString(map);

JHipsterProperties.Logging loggingProperties = jHipsterProperties.getLogging();
JHipsterProperties.Logging.Logstash logstashProperties = loggingProperties.getLogstash();

if (loggingProperties.isUseJsonFormat()) {
    addJsonConsoleAppender(context, customFields);
}
if (logstashProperties.isEnabled()) {
    addLogstashTcpSocketAppender(context, customFields, logstashProperties);
}
if (loggingProperties.isUseJsonFormat() || logstashProperties.isEnabled()) {
    addContextListener(context, customFields, loggingProperties);
}
```

Тут происходит три основных момента:
1. **addJsonConsoleAppender** - инициализация логирования в консоль.
2. **addLogstashTcpSocketAppender** - инициализация сокета слушателя логов для приема логов с фронта.
3. **addContextListener** - инициализация логов настроеных дополнительно.

Если необходимо выбрать и использовать другую систему логирования, то изменения нужно вносить именно в этот файл.

## Аналоги

**Log4J2**

Файл настроек будет очень похож на аналогичное логирование для .Net приложений с использованием log4net. Данный способ логирования работает даже без использования специальной конфигурации. Тогда настройки логирования будут браться из Logback файла конфигурации.

## Файл конфигурации

Файл конфигурации находится по пути: src/main/resources/**logback-spring.xml**

Тут находится 
1. Конфигурация форматов сообщений; 
2. Настройка вывода лога в различные appender
- Файл
- Консоль
- База данных
- Отправка по сети в сервис и др. 

3. Настройка уровней логирования для отдельных компонентов.

## Ссылки

1. [Все типы appender для logback](https://logback.qos.ch/manual/appenders.html)

2. [Примеры паттернов и настроек spring-boot](https://github.com/spring-projects/spring-boot/blob/v2.7.2/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/logback/defaults.xml)

3. [Системы логирования в Spring React](https://github.com/Flexberry/Flexberry.SpringReactApplication.Sample/blob/main/docs/%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%20%D0%BB%D0%BE%D0%B3%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F.md)

4. [Logback Project](https://logback.qos.ch/)

5. [Simple Logging Facade for Java (SLF4J)](https://www.slf4j.org/)

6. [Apache Log4j™ 2](https://logging.apache.org/log4j/2.x/)